<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>beforeRunningCommand</key>
	<string>nop</string>
	<key>command</key>
	<string>
# is there a selection?
if [[ -z $TM_SELECTED_TEXT ]]; then
	# nope, assume TM_CURRENT_LINE is an include line
	HeaderName=`echo $TM_CURRENT_LINE | perl -pe 's/#(?:import|include)(?:\s+)(?:&lt;|")(.*)(?:&gt;|")/\$1/'`;
else
	# use the selection
	HeaderName=$TM_SELECTED_TEXT
fi

FindInPaths=(/usr/include /System/Library/Frameworks/ApplicationServices.framework /System/Library/Frameworks/AppKit.framework /System/Library/Frameworks/Foundation.framework /System/Library/Frameworks/Kernel.framework)

CountPaths=${#FindInPaths[*]}
FindInPaths[$CountPaths]="$TM_PROJECT_DIRECTORY"

echo find "${FindInPaths[@]}" -name "$HeaderName" -print -exec open -a TextMate {} \\\; | sh
</string>
	<key>input</key>
	<string>selection</string>
	<key>keyEquivalent</key>
	<string>@D</string>
	<key>name</key>
	<string>Quick Open</string>
	<key>output</key>
	<string>showAsTooltip</string>
	<key>scope</key>
	<string>source.c, source.objc</string>
	<key>uuid</key>
	<string>FF0E22D6-7D78-11D9-B4DE-000A95A89C98</string>
</dict>
</plist>
